
    https://linuxhandbook.com/ üíò

- [Movernos](#movernos)
  - [`pwd` - (print working directory)](#pwd---print-working-directory)
  - [`cd` - (change directory)](#cd---change-directory)
- [Visualizar](#visualizar)
  - [`ls` - (list)](#ls---list)
  - [`cat` - (catenate)](#cat---catenate)
  - [`tail`](#tail)
  - [`head`](#head)
  - [`nl` - (number lines)](#nl---number-lines)
  - [`wc` - (word count)](#wc---word-count)
- [Crear cosas](#crear-cosas)
  - [`touch`](#touch)
  - [`mkdir` - (make directory)](#mkdir---make-directory)
  - [`mv` - (move)](#mv---move)
  - [`cp` - (copy)](#cp---copy)
  - [`rm` - (remove)](#rm---remove)
  - [`rmdir` - (remove directory)](#rmdir---remove-directory)
- [Modificar Archivos](#modificar-archivos)
  - [`nano`](#nano)
  - [`sort`](#sort)
  - [`grep` - (global, regular expression and print)](#grep---global-regular-expression-and-print)
  - [cut](#cut)
  - [sed](#sed)
  - [`>` & `>>`](#--)
- [Enlaces](#enlaces)
  - [`ln` - (link)](#ln---link)
  - [`ln -s` - (soft link)](#ln--s---soft-link)
- [`chmod` - (change access mode)](#chmod---change-access-mode)
  - [Forma simb√≥lica:](#forma-simb√≥lica)
  - [Forma num√©rica:](#forma-num√©rica)
- [Compresi√≥n](#compresi√≥n)
  - [`tar`](#tar)
  - [`zip`](#zip)
  - [`rar`](#rar)
- [Fecha](#fecha)
  - [date](#date)
  - [cal](#cal)
- [Wildcards o comodines](#wildcards-o-comodines)
- [sudo apt install](#sudo-apt-install)
- [Shell](#shell)
  - [Requisitos](#requisitos)
  - [Par√°metros](#par√°metros)
  - [Variables](#variables)
  - [Condicionales](#condicionales)
  - [Ejemplo](#ejemplo)

# Movernos
## `pwd` - (print working directory)
Nos indica la ruta absoluta al directorio actual:
```console
alex@alex-vm:~$ pwd
/home/alex/Desktop
```
## `cd` - (change directory)

| Comando     | Resultado                                                  |
| ----------- | ---------------------------------------------------------- |
| `cd `       | nos lleva a nuestra "home"                                 |
| `cd /`      | nos lleva al "root"                                        |
| `cd ..`     | nos sube al directorio inmediatamente superior             |
| `cd [path]` | nos lleva a la direcci√≥n introducida (absoluta o relativa) |

```console
alex@alex-vm:~$ cd /media
alex@alex-vm:/media$
```

**Ruta absoluta:** Desde el root hasta el archivo:
> \Users\grupo1\Documents\DAW-Alex\Cheatsheets\linux.md

**Ruta relativa:** Desde el directorio actual (DAW-Alex)
> Cheatsheets\linux.md

# Visualizar
## `ls` - (list)
Lista los contenidos de un directorio.

| Comandos | Resultado                                                |
| -------- | -------------------------------------------------------- |
| `ls `    | el nombre de los archivos                                |
| `ls -a`  | tambi√©n los archivos ocultos                             |
| `ls -l`  | los archivos de forma detallada                          |
| `ls -r`  | los archivos en orden inverso                            |
| `ls -t`  | los archivos por orden de modificaci√≥n (+nuevos primero) |
| `ls -i`  | el inodo del archivo (algo as√≠ como un id)               |

Ejemplo de `ls -l`

```bash
alex@alex-vm:~$ ls -l
-rw-rw---- 1 alex alex 32 feb 11 08:47 fichero.txt
```

| tipo de fichero | permisos  | propietario | grupo | tama√±o | fecha y hora | nombre      |
| --------------: | --------- | ----------- | ----- | ------ | ------------ | ----------- |
|               - | rw-rw---- | alex        | alex  | 32     | feb 11 08:47 | fichero.txt |

| signo  | tipo de fichero   |
| :----: | ----------------- |
|  `-`   | fichero ordinario |
|  `d`   | directorio        |
| `b, c` | archivo especial  |
|  `l`   | enlace            |

## `cat` - (catenate)
Su principal funci√≥n es concatenar archivos *(de ah√≠ el nombre* üêµ *)*. Pero tambi√©n se usa de forma general para mostrar por el terminal los contenidos de un archivo.

```bash
alex@alex-vm:~$ cat file.txt
linea 1
linea 2
linea 3
```
## `tail`
Muestra el final *(la cola)* de un archivo.
| Modificador | Resultado                                        |
| :---------: | ------------------------------------------------ |
|    `-n`     | Muestra las n √∫ltimas l√≠neas del archivo.        |
|    `+n`     | Muestra todas las l√≠neas a partir de la en√©sima. |

## `head`
Muestra el principio *(la cabeza)* de un archivo.

Con el modificador `+n` podemos escoger el n¬∫ de l√≠neas que queremos mostrar.

## `nl` - (number lines)
Muestra el contenido del fichero con la l√≠neas numeradas.

## `wc` - (word count)
Lista el n¬∫ de lineas, palabras, caracteres y el nombre del archivo.

```bash
alex@alex-vm:~$ cat fichero1.txt
 16  32 135 fichero.txt
```

# Crear cosas
## `touch`
Actualiza la fecha de modificaci√≥n de un archivo sin necesidad de abrirlo.

> Si el archivo no existe, lo crea.

## `mkdir` - (make directory)
Crear directorios.

## `mv` - (move)

Lo usamos para mover archivos o cambiarles el nombre.

```bash
# mueve el archivo
mv file.txt Folder/file.txt
```
```bash
# le cambia el nombre
mv old_name.txt new_name.txt
```
```bash
# mueve el archivo y le cambia el nombre
mv file.txt Folder/file1.txt
```

## `cp` - (copy)
Parecido al `mv` pero copiando, no moviendo.

## `rm` - (remove)
Se usa para eliminar archivos, pero podemos aprovecharlo tambi√©n para eliminar directorios con estos modificadores:

| Comando            | Resultado                            |
| ------------------ | ------------------------------------ |
| `rm -d [dir_name]` | elimina un directorio                |
| `rm -r [dir_name]` | elimina un directorio y su contenido |

## `rmdir` - (remove directory)
Elimina directorios.

# Modificar Archivos
## `nano`
Abre el archivo escogido en el editor de texto Nano.

## `sort`
Ordena el contenido por l√≠neas de un archivo, en orden alfab√©tico y car√°cter a car√°cter.

## `grep` - (global, regular expression and print)
```bash
# mueve el archivo y le cambia el nombre
grep 'regex' file_name
```

## cut 
## sed

## `>` & `>>`
| Comando                     | Resultado                                                          |
| --------------------------- | ------------------------------------------------------------------ |
| `something > [file_name] `  | Sobrescribe el contenido del archivo con lo que haya al otro lado. |
| `something >> [file_name] ` | A√±ade al final del archivo lo que haya al otro lado.               |

# Enlaces

## `ln` - (link)
Enlace duro. Son a efectos pr√°cticos el mismo archivo pero en dos sitios distintos *(comparten inodo)*. Si borramos el archivo original, al enlace no le pasa nada. 
```bash
ln file linked_file
```

## `ln -s` - (soft link)
Enlace simb√≥lico. No es m√°s que un puntero a la direcci√≥n del archivo original. Si el original desaparece este sigue apuntando, a un lugar vac√≠o a lo que ocupe su lugar en un futuro.
```bash
ln -s file linked_file
```

# `chmod` - (change access mode)

Permite cambiar los permisos de un archivo o directorio.

## Forma simb√≥lica:
<table>
<tr>
  <th>Afectado</th>
  <th>Asignaci√≥n</th>
  <th>Permisos</th>
</tr>
<tr><td>

|  Mod | Significado |
| ---: | ----------- |
|  `u` | usuario     |
|  `g` | grupo       |
|  `o` | otros       |

</td><td>

|  Mod | Significado |
| ---: | ----------- |
|  `+` | a√±ade       |
|  `-` | quita       |
|  `=` | asigna      |

</td><td>

|  Mod | Significado |
| ---: | ----------- |
|  `r` | lectura     |
|  `w` | escritura   |
|  `x` | ejecuci√≥n   |

</td></tr>
</table>

Le a√±adimos permisos de lectura y escritura al usuario y al grupo:

```console
alex@alex-vm:~$ ls -l
---------- 1 alex alex 32 feb 11 08:47 fichero.txt
alex@alex-vm:~$ chmod ug+rw fichero.txt
alex@alex-vm:~$ ls -l
-rw-rw---- 1 alex alex 32 feb 11 08:47 fichero.txt
```

## Forma num√©rica:

<table>
<tr><td>

| Valor | Significado |
| :---: | ----------- |
| `100` | lectura     |
| `010` | escritura   |
| `001` | ejecuci√≥n   |

</td><td>

Permite asignar los permisos de forma absoluta.

Sumamos en binario los valores de la tabla seg√∫n los permisos que queramos conceder.

Hay 3 n√∫meros, uno por cada grupo de usuarios (u g o).

</td></tr>
</table>

```console
alex@alex-vm:~$ ls -l
---------- 1 alex alex 32 feb 11 08:47 fichero.txt
alex@alex-vm:~$ chmod 750 fichero.txt
alex@alex-vm:~$ ls -l
-rwxr-x--- 1 alex alex 32 feb 11 08:47 fichero.txt
```


# Compresi√≥n
## `tar`
```bash
# Comprime una serie de archivos
tar -cvf file_name file1 file2 ...
```
```bash
# Descomprime el archivo en un directorio
tar -xvf file_name --directory ~/aqu√≠
```

|  Mod  | Significado                                                     |
| :---: | --------------------------------------------------------------- |
|  `c`  | create - crear un archivo                                       |
|  `v`  | visualize - muestra lo que vamos comprimiendo / descomprimiendo |
|  `f`  | file_name - el siguiente argumento es el nombre del fichero     |
|  `x`  | descomprimir                                                    |
|  `t`  | listar el contenido del fichero                                 |

## `zip`
```bash
# Comprime una serie de archivos
zip file_name file1 file2 ...
```
```bash
# Descomprime el archivo en un directorio
unzip file_name -d directory
```
```bash
# Ver el contenido del archivo
unzip -v file_name 
```

## `rar`
```bash
# Comprime una serie de archivos
rar a file_name file1 file2 ...
```
```bash
# Descomprime el archivo en un directorio
rar x file_name directory/
```

# Fecha
## date
## cal

# Wildcards o comodines
|     Mod      | Significado                                       | Ejemplo                                                                                         |
| :----------: | ------------------------------------------------- | ----------------------------------------------------------------------------------------------- |
|     `*`      | cualquier car√°cter o grupo de caracteres          | `ls *.txt` : todos los .txt                                                                     |
|     `?`      | un solo car√°cter                                  | `ls ?.txt` : todos los .txt cuyo nombre tenga un solo car√°cter.                                 |
|    `[..]`    | cualquier car√°cter de los incluidos dentro        | `ls [abc].txt` : a.txt, b.txt y c.txt                                                           |
|   `[!..]`    | cualquier car√°cter de los **no** incluidos dentro | `ls [!abc].txt` : todos los .txt cuyo nombre tenga un solo car√°cter y sea distinto de a, b y c. |
|   `{x..x}`   | todos los elementos entre los dos (incluidos)     | `ls {A..M}.txt` : igual que arriba pero con todos de la A a la M.                               |
| `{x1,x2,x3}` | todos los elementos de la lista                   | `mkdir {carpeta1,carpeta2,carpeta3}` : crea las 3 carpetas                                      |


# sudo apt install

# Shell

Podemos ejecutar los scripts con el comando `sh` o `bash`.

## Requisitos
- Permisos de ejecuci√≥n (*es un archivo ejecutable* üò¨).
- Cabecera: indica que el archivo de texto en cuesti√≥n es un shell script. 

  ```shell
  #! /bin/bash
  ```


## Par√°metros
Cadenas de texto escritas despu√©s del nombre del script.
```console
alex@alex-vm:~$ sh shell.sh param1 param2 ...
```
| icon | ¬øQu√© representa?                                      |
| ---- | ----------------------------------------------------- |
| `$n` | info de un par√°metro siento n el n¬∫ del par√°metro     |
| `$*` | todos los par√°metros (bajo forma de una √∫nica string) |
| `$@` | todos los par√°metros (bajo forma de una lista)        |
| `$#` | n¬∫ de par√°metros recibidos (int)                      |

## Variables

```shell
var = "hola"  # asignar valor
echo $var     # acceder a su contenido
echo {$var}   # acceder a su contenido
```

Variables predefinidas:
| icon | ¬øQu√© representa?                                |
| ---- | ----------------------------------------------- |
| `$0` | nombre del script                               |
| `$$` | PID del proceso asignado al script en ejecuci√≥n |
| `$?` | resultado del √∫ltimo proceso ejecutado          |

## Condicionales
```bash
if test $# le 0 
then
  # let here be code
else
  # let here be code
fi
```

```bash
for i in ${foo[@]}
do
	# let here be code
done
```

```bash
while [ condition ]
do
	# let here be code
done
```




## Ejemplo
El `;` √∫nicamente hace falta si queremos poner m√°s de un comando en una l√≠nea.

```bash
#! /bin/bash

# funci√≥n de ayuda
ayuda() {
cat << DESC_AYUDA
SYNOPSIS
  $0 NOMBRE_1 [NOMBRE_2] ... [NOMBRE_N]
DESCRIPCI√ìN
  Muestra "Hola NOMBRE_1, NOMBRE_2, ... NOMBRE_N!" por pantalla.
C√ìDIGOS DE RETORNO
  1 Si el n√∫mero de par√°metros es menor que 1
DESC_AYUDA
}

# si n√∫mero de par√°metros <= 0
if test $# le 0 ; then
  echo "Hay que introducir al menos un par√°metro."
  ayuda # llama a la funci√≥n de ayuda
  exit 1
fi

MENSAJE="Hola"
PRIMERO=1

# mientras haya par√°metros
while [ n "$1" ]; do
  if [ $PRIMERO eq 1 ]; then
    MENSAJE="$MENSAJE $1"
    PRIMERO=0
  else
    MENSAJE="$MENSAJE, $1"
  fi

  # pasamos al siguiente par√°metro
  shift
done

# mostramos la salida por pantalla
echo $MENSAJE"!"
exit 0
```
